<!-- Users -->
@if (dataList().length > 0) {
  <mat-card class="mb-25 bg-white border-none d-block">
    <mat-card-header>
      <div style="width: 100%; display: flex; justify-content: center; align-items: center;">
        <mat-card-title style="width: 100%; display: flex; justify-content: space-between;">
          <form class="search-box position-relative">
            <mat-form-field>
              <mat-label>Filtrar</mat-label>
              <input type="text" matInput (keyup)="applyFilter($event)" placeholder="Buscar..." #input>
              <mat-icon matPrefix>search</mat-icon>
            </mat-form-field>

          </form>
        </mat-card-title>

        <mat-card-subtitle>
          <button mat-button class="add-new-btn" (click)="reloadList()">
            <mat-icon>sync</mat-icon>
            Sincronizar
          </button>
        </mat-card-subtitle>
      </div>
    </mat-card-header>
  
    <mat-card-content>
      <div class="users-table">
        <div class="table-responsive" style="max-height: 350px;">
          <table mat-table [dataSource]="dataSource">
            <!-- Generar columnas dinámicamente -->
            @for (column of displayedColumns; track $index) {
              <ng-container [matColumnDef]="column">
                <th mat-header-cell *matHeaderCellDef mat-sort-header  class="headers fixed-column"> {{ column }} </th>
                <td mat-cell *matCellDef="let element" class="fixed-column"> 
                  <ng-container>{{ getColumnValue(element, column) }}</ng-container>
                </td>
              </ng-container>
            }
  
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="raw" style="cursor: pointer;" [ngClass]="{'selected-raw': row.selectedRow }" (click)="selectedRowList(row)"></tr>
  
            <!-- Row shown when there is no matching data. -->
            <tr class="mat-row" *matNoDataRow>
              <td class="mat-cell" colspan="4">No se encontraron coincidencias "{{input.value}}"</td>
            </tr>
          </table>
        </div>
  
        <mat-paginator [pageSizeOptions]="[5, 10, 15, 25, 50, 100]" showFirstLastButtons></mat-paginator>
      </div>
    </mat-card-content>
  </mat-card>
}@else {
  <div class="d-flex justify-content-between alert alert-warning">
    @if (!loadService()) {
      <div class="align-content-center">
        Realizando consulta de información!
      </div>
     
    }@else if (loadService() && dataList().length === 0){  
      <div class="align-content-center">
        No se han encontrado registros!
      </div>

      <div class="d-flex gap-2">
          <button mat-button color="primary" (click)="reloadList()">
            <mat-icon>sync</mat-icon>
            Sincronizar
          </button>
      </div>
    }
  </div>
}


<!-- Loader -->
<ngx-spinner bdColor = "rgba(0, 0, 0, 0.6)" size = "medium" color = "#ffff" type = "ball-climbing-dot" [fullScreen] = "true">
  <p style="color: white" > Cargando... </p>
</ngx-spinner>